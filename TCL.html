<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>STUDYHUB | TCL</title>
  <link rel="shortcut icon" href="img/BrandLogo.png" type="image/x-icon">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/style1.css">
  <link rel="stylesheet" href="css/ai.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

</head>

<body>

  <div class="loader"></div>

  <nav id="leftNavbar">
    <a href="index.html">Home</a>
    <a href="constraints.html">Constraints</a>
    <a href="DDL.html">DDL</a>
    <a href="DML.html">DML</a>
    <a href="DCL.html">DCL</a>
    <a href="TCL.html">TCL</a>
    <a href="DQL.html">DQL</a>
    <a href="Acidproperty.html">ACID PROPERITES</a>
    <a href="Join.html">Joins</a>
    <a href="Contact.html">Contact Us</a>
  </nav>
  <section class="container-fluid nb sticky-top">
    <div class="head text-center">
        <h1 class="text-start" id="studyhub">Studyhub</h1>
    </div>
    <div class="d-flex align-items-center info">
      <div class="dropdown">
          <button class="text-light dropdown-toggle d-flex align-items-center user-initial" id="userOptionsButton" type="button" data-bs-toggle="dropdown" aria-expanded="false" title="User Options">
          User
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userOptionsButton">
              <li><a class="dropdown-item" href="login.html" id="signInLink">Sign In</a></li>
              <li><a class="dropdown-item" href="profile.html" id="profileLink" style="display: none;">Profile</a></li>
              <li><a class="dropdown-item" href="#" id="signoutbutton" style="display: none;">Logout</a></li>
          </ul>
      </div>
  </div>

  

    <div id="studyhubToggle">
        <i class="fa fa-bars" aria-hidden="true"></i>
    </div>
</section>

  <Section>
    <div class="suhead">
      <h1 class="tithed"> Transaction Control Commands (TCL)</h1>

      <p class="container titpara">
        Transaction Control Commands in SQL are used to manage transactions, which are sequences of SQL operations that
        are treated as a single unit of work
      </p>

    </div>
  </Section>
  <section class="container">
    <div class="subhead">
      <h2 class="text-start">Commands</h2>
    </div>
  </section>
  <section>
    <div class="ddlcmd container">
      <h4>Commit</h4>
      <p> Commit command is used to save all the transactions to the database.</p>

      <h6>Commands</h6>
      <div class="copy-text">
        <input type="text" class="text" value="COMMIT;" id="textToCopy" readonly>
      </div>

      
    <section class="assistant">
      <button class="talk" onclick=" Commitcmd()"><i class="fa-solid fa-robot"></i> HubTalk</button>
      <!-- <button onclick="togglePause()">Pause</button> -->
      <div class="content">
          <div id="wordsCommit"></div>
      </div>
  </section>
      <h6>
        Example:
      </h6>

  

      <div class="table-responsive">
        <h6>The Example table</h6>
        <table class="table table-bordered table-dark">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">NAME</th>
              <th scope="col">AGE</th>
              <th scope="col">ADDRESS</th>
              <th scope="col">SALARY</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">1</th>
              <td>abhi</td>
              <td>32</td>
              <td>Delhi</td>
              <td>2000.00</td>

            </tr>
            <tr>
              <th scope="row">2</th>
              <td>adam</td>
              <td>25</td>
              <td>Ahmedabad</td>
              <td>6500.00</td>
            </tr>
            <tr>
              <th scope="row">3</th>
              <td>alex</td>
              <td>27</td>
              <td>Kota</td>
              <td>2000.00</td>
            </tr>
            <tr>
              <th scope="row">4</th>
              <td>anu</td>
              <td>25</td>
              <td>Indore</td>
              <td>10000.00</td>
            </tr>
            <tr>
              <th scope="row">5</th>
              <td>ashish</td>
              <td>24</td>
              <td>Mumbai</td>
              <td>8000.00</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="copy-text">
        <input type="text" value="DELETE FROM CUSTOMERS WHERE AGE = 25;COMMIT;" id="textToCopy" readonly>
        <button class="copy" onclick="copyText(this)">
          <i class="fa fa-clone" aria-hidden="true"></i>
        </button>
      </div>




      <div class="table-responsive">
        <h6>After Using the Commit Command</h6>
        <table class="table table-bordered table-dark ">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">NAME</th>
              <th scope="col">AGE</th>
              <th scope="col">ADDRESS</th>
              <th scope="col">SALARY</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">1</th>
              <td>abhi</td>
              <td>32</td>
              <td>Delhi</td>
              <td>2000.00</td>

            </tr>
            <!-- <tr>
                    <th scope="row">2</th>
                    <td>adam</td>
                    <td>25</td>
                    <td>Ahmedabad</td>
                    <td>6500.00</td>
                  </tr> -->
            <tr>
              <th scope="row">3</th>
              <td>alex</td>
              <td>27</td>
              <td>Kota</td>
              <td>2000.00</td>
            </tr>
            <!-- <tr>
                    <th scope="row">4</th>
                    <td>anu</td>
                    <td>25</td>
                    <td>Indore</td>
                    <td>10000.00</td>
                  </tr> -->
            <tr>
              <th scope="row">5</th>
              <td>ashish</td>
              <td>24</td>
              <td>Mumbai</td>
              <td>8000.00</td>
            </tr>
          </tbody>
        </table>
      </div>


      <p class="mt-3">
        In this example,COMMIT command is used to permanently save changes made during the current transaction. Once a
        COMMIT is issued, the changes become permanent and cannot be rolled back.
      </p>


    </div>


  </section>


  <section>
    <div class="ddlcmd container">
      <h4>Rollback</h4>
      <p> Rollback command is used to undo transactions that have not already been saved to the
        database.
      </p>

      <h6>Commands</h6>
      <div class="copy-text">
        <input type="text" class="text" value=" ROLLBACK" id="textToCopy" readonly>

      </div>
      <section class="assistant">
        <button class="talk" onclick=" Rollbackcmd()"><i class="fa-solid fa-robot"></i> HubTalk</button>
        <!-- <button onclick="togglePause()">Pause</button> -->
        <div class="content">
            <div id="wordsRollback"></div>
        </div>
    </section>



      <h6>
        Example:
      </h6>
      <div class="copy-text">
        <input type="text" value="DELETE FROM CUSTOMERS WHERE AGE = 25; ROLLBACK;" id="textToCopy" readonly>
        <button class="copy" onclick="copyText(this)">
          <i class="fa fa-clone" aria-hidden="true"></i>
        </button>
      </div>
      <div class="table-responsive">
        <h6></h6>
        <table class="table table-bordered table-dark ">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">NAME</th>
              <th scope="col">AGE</th>
              <th scope="col">ADDRESS</th>
              <th scope="col">SALARY</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">1</th>
              <td>abhi</td>
              <td>32</td>
              <td>Delhi</td>
              <td>2000.00</td>

            </tr>
            <tr>
              <th scope="row">2</th>
              <td>adam</td>
              <td>25</td>
              <td>Ahmedabad</td>
              <td>6500.00</td>
            </tr>
            <tr>
              <th scope="row">3</th>
              <td>alex</td>
              <td>27</td>
              <td>Kota</td>
              <td>2000.00</td>
            </tr>
            <tr>
              <th scope="row">4</th>
              <td>anu</td>
              <td>25</td>
              <td>Indore</td>
              <td>10000.00</td>
            </tr>
            <tr>
              <th scope="row">5</th>
              <td>ashish</td>
              <td>24</td>
              <td>Mumbai</td>
              <td>8000.00</td>
            </tr>
          </tbody>
        </table>
      </div>


      <p class="mt-3">
        In this example,This ROLLBACK command is used to undo changes made during the current transaction. It reverts
        the database to its state before the transaction began.

      </p>

    </div>
  </section>


  <section>
    <div class="ddlcmd container">
      <h4> SAVEPOINT</h4>
      <p> It is used to roll the transaction back to a certain point without rolling back the entire
        transaction.</p>

      <h6>Commands</h6>
      <div class="copy-text">
        <input type="text" class="text" value="SAVEPOINT SAVEPOINT_NAME" id="textToCopy" readonly>

      </div>

      <section class="assistant">
        <button class="talk" onclick=" savepointcmd()"><i class="fa-solid fa-robot"></i> HubTalk</button>
        <!-- <button onclick="togglePause()">Pause</button> -->
        <div class="content">
            <div id="wordssavepoint"></div>
        </div>
    </section>



      <div>
        <h6>
          Example:
        </h6>

        <div class="copy-text">
          <input type="text" value="SAVEPOINT sp1;" id="textToCopy" readonly>
          <button class="copy" onclick="copyText(this)">
            <i class="fa fa-clone" aria-hidden="true"></i>
          </button>
        </div>
        <p class="mt-3">
          In this example,SAVEPOINT command sets a named transaction savepoint within the current transaction. It allows
          you to roll back to a specific point within the transaction.
        </p>

        <div class="copy-text">
          <input type="text" value="RELEASE SAVEPOINT sp1;" id="textToCopy" readonly>
          <button class="copy" onclick="copyText(this)">
            <i class="fa fa-clone" aria-hidden="true"></i>
          </button>
        </div>

        <p class="mt-3">
          This RELEASE SAVEPOINT command removes a previously defined savepoint from the current transaction. Once
          released, you cannot roll back to that savepoint.
        </p>
      </div>
    </div>
  </section>


  <section>
    <div class="container mt-5">
      <h2>Time For Quize😉</h2>
      <h4>Questions</h4>
      <div class="quiz bg-transparent" id="quiz">
        <div class="quiz-header">
          <h2 id="question">Question Text</h2>
          <ul class="qustlist">
            <li>
              <input type="radio" name="answer" id="a" class="answer">
              <label for="a" id="a_text">Answer</label>
            </li>
            <li>
              <input type="radio" name="answer" id="b" class="answer">
              <label for="b" id="b_text">Answer</label>
            </li>
            <li>
              <input type="radio" name="answer" id="c" class="answer">
              <label for="c" id="c_text">Answer</label>
            </li>
            <li>
              <input type="radio" name="answer" id="d" class="answer">
              <label for="d" id="d_text">Answer</label>
            </li>
          </ul>
        </div>
        <button id="submit"
          style="outline: 0; background-color: blue;color: aliceblue;border-radius: 10px;padding: 5px; margin-left: -0.5rem;">Submit</button>
      </div>
    </div>
  </section>




  <div class="butt" style="margin:0 1em; margin-top: 1em;">
    <button class="but"><a href="DCL.html">Prev</a></button>
<button class="but"><a href="DQL.html">Next</a></button>
</div>


<!-- AI -->
<section>
  <div class="chatbot-icon">
      <button class="btn btn-primary loading-aiimg" id="toggleChatbot">Ai-Hubs
          <img src="img/ai-assistant.png" alt="AI Assistant" style="width: 30px; height: 30px; margin-left: 5px;" class="loading-aiimg">
      </button>
  </div>
  
  <div class="chatbot-window" id="chatbotWindow">
      <div class="chatbot-header d-flex justify-content-between align-items-center">
          <h5>Ai-Hubs  <img src="img/ai-assistant.png" alt="AI Assistant" style="width: 30px; height: 30px; margin-left: 2px;"></h5>
          <i class="fa-solid fa-x" id="closeChatbot"></i>
      </div>
      <div class="chatbot-body">
          <textarea class="form-control mb-3" id="questionInput" cols="30" rows="5" placeholder="Ask an SQL querying question..."></textarea>
          <div class="grid">
              <button class="btn btn-primary" id="generateAnswerBtn">Generate Answer</button>
              <button class="btn btn-secondary" id="resetBtn">Reset</button>
          </div>
          <div class="mt-4">
              <h5>Answer:</h5>
              <pre class="answer-box" id="answerOutput"></pre>
          </div>
      </div>
  </div>
 </section>
<!--  -->

<!-- Footer -->

<footer>
  <div class="text-center mt-5 bg-dark p-2">
    <p class="fs-5">&COPY; Copyright Own by StudyHub</p>
  </div>
</footer>

<!-- Footer  -->

  <script src="https://kit.fontawesome.com/def8c494cf.js" crossorigin="anonymous"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="js/TCL.js"></script>
  <script src="js/script.js"></script>
  <script src="js/voice.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="js/aihub.js"></script>
  <script>
    let UserCreds = JSON.parse(sessionStorage.getItem("user-creds"));
    let UserInfo = JSON.parse(sessionStorage.getItem("user-info"));
    let SignoutBtn;
    let SignInLink = document.getElementById("signInLink");
    let ProfileLink = document.getElementById("profileLink");
    let logoutTimer;
    let signUpRedirectTimer; // Timer for sign-up redirection
    
    const Signout = () => {
        sessionStorage.removeItem("user-creds");
        sessionStorage.removeItem("user-info");
        updateDropdown(); 
        window.location.href = "index.html"; 
    };
    
  
    const redirectToSignUp = () => {
      
        if (!sessionStorage.getItem("user-creds")) {
            signUpRedirectTimer = setTimeout(() => {
                window.location.href = "Login.html"; 
            }, 10000); 
        }
    };
    
    
    const clearSignUpRedirectTimer = () => {
        clearTimeout(signUpRedirectTimer);
    };
    
    const initializeLogoutTimer = () => {
        clearTimeout(logoutTimer); 
        if (sessionStorage.getItem("user-creds")) {
            logoutTimer = setTimeout(() => {
                Signout(); 
            }, 5 * 60 * 1000); 
        }
    };
    
    const updateDropdown = () => {
        if (!sessionStorage.getItem("user-creds")) {
            SignInLink.style.display = 'block'; 
            ProfileLink.style.display = 'none'; 
            if (SignoutBtn) SignoutBtn.style.display = 'none'; 
            redirectToSignUp(); 
        } else {
            const userInfo = JSON.parse(sessionStorage.getItem("user-info"));
            document.getElementById("userOptionsButton").textContent = userInfo.firstname;
            SignInLink.style.display = 'none'; 
            ProfileLink.style.display = 'block'; 
            if (SignoutBtn) SignoutBtn.style.display = 'block'; 
            clearSignUpRedirectTimer(); 
            // initializeLogoutTimer(); 
        }
    };
    
    document.addEventListener('DOMContentLoaded', () => {
        SignoutBtn = document.getElementById("signoutbutton"); 
        updateDropdown();

        // Check if the user is logged in before adding event listeners for user activity
        if (sessionStorage.getItem("user-creds")) {
            // Reset inactivity timer on user activity
            document.addEventListener("click", initializeLogoutTimer);
            document.addEventListener("keydown", initializeLogoutTimer);
            document.addEventListener("mousemove", initializeLogoutTimer);
        }

        // Add signout button listener after DOM content is loaded
        if (SignoutBtn) {
            SignoutBtn.addEventListener("click", Signout);
        }
    });

    const saveLastPage = () => {
        sessionStorage.setItem("last-page", window.location.href);
    };
    window.addEventListener('beforeunload', saveLastPage);

    const onLoginSuccess = () => {
        // sessionStorage.setItem("user-creds", JSON.stringify({username: 'user'})); 
        // sessionStorage.setItem("user-info", JSON.stringify({firstname: 'John'})); 
        updateDropdown(); 
        redirectToLastPage(); 
    };
</script>
</body>
</html>

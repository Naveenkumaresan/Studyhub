<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Studyhub | DCL</title>
    <link rel="shortcut icon" href="img/BrandLogo.png" type="image/x-icon">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style1.css">   
    <link rel="stylesheet" href="css/ai.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>

<body>

    <div class="loader"></div>

    <nav id="leftNavbar">
        <a href="index.html">Home</a>
        <a href="constraints.html">Constraints</a>
        <a href="DDL.html">DDL</a>
        <a href="DML.html">DML</a>
        <a href="DCL.html">DCL</a>
        <a href="TCL.html">TCL</a>
        <a href="DQL.html">DQL</a>
        <a href="Acidproperty.html">ACID PROPERITES</a>
        <a href="Join.html">Joins</a>
        <a href="Contact.html">Contact Us</a>
      </nav>
    
    <section class="container-fluid nb sticky-top">
        <div class="head text-center">
            <h1 class="text-start" id="studyhub">Studyhub</h1>
        </div>
<!--         <div class="d-flex align-items-center info">
            <div class="dropdown">
                <button class="text-light dropdown-toggle d-flex align-items-center user-initial" id="userOptionsButton" type="button" data-bs-toggle="dropdown" aria-expanded="false" title="User Options">
                User
                </button>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userOptionsButton">
                    <li><a class="dropdown-item" href="login.html" id="signInLink">Sign In</a></li>
                    <li><a class="dropdown-item" href="profile.html" id="profileLink" style="display: none;">Profile</a></li>
                    <li><a class="dropdown-item" href="#" id="signoutbutton" style="display: none;">Logout</a></li>
                </ul>
            </div>
        </div>
       -->
        
      
        <div id="studyhubToggle">
            <i class="fa fa-bars" aria-hidden="true"></i>
        </div>
    </section>
    <Section>
        <div class="suhead">
            <h1 class="tithed"> Data Control Language (DCL)</h1>

            <p class="container titpara">
                DCL commands in SQL are used to manage user privileges and permissions within a database
                GRANT allows you to grant privileges, while REVOKE allows you to revoke them when no longer needed or
                when security requirements change.


            </p>

        </div>
    </Section>
    <section class="container">
        <div class="subhead">
            <h2 class="text-start">Commands</h2>
            <!-- <ol class="text-center">
                <li><a href=""> CREATE</a></li>
                <li><a href="">ALTER</a></li>
                <li><a href="">Drop</a></li>
                <li><a href="">Truncate</a></li>
                <li><a href="">Rename</a></li>
            </ol> -->
        </div>
    </section>
    <section>
        <div class="ddlcmd container">
            <h4>GRANT</h4>
            <p>Provides specific privileges to database users or roles.</p>

            <h6>Commands</h6>
            <div class="copy-text">
                <input type="text" class="text" value="GRANT privileges ON object TO {user | role | PUBLIC};
            " id="textToCopy" readonly>
                <!-- <button class="copy">
                    <i class="fa fa-clone "> Copy </i>
                </button> -->
            </div>
            <h6>Example</h6>
        
        <input type="text" value="GRANT SELECT, UPDATE ON MY_TABLE TO SOME_USER, ANOTHER_USER; " id="textToCopy" readonly>
            <h6>
                Explanation:
            </h6>
            <p>
                The GRANT command is used to grant specific privileges to a database user or role on a database object
                such as a table, view, procedure, or sequence. Privileges can include permissions like SELECT, INSERT,
                UPDATE, DELETE, EXECUTE, and more. You specify the privileges to grant, the object on which to grant
                them, and the user or role to whom you're granting the privileges. The keyword PUBLIC can be used to
                grant privileges to all users.
            </p>

            <div class="copy-text">
                <input type="text" value="GRANT SELECT, INSERT ON Employees TO user1; " id="textToCopy" readonly>
                <button class="copy" onclick="copyText(this)">
                    <i class="fa fa-clone" aria-hidden="true"></i>
                </button> 
            </div>

            <p class="mt-3">
                In this example,GRANT command gives the user named "user1" permission to select and insert data into the "Employees" table. Permissions can be granted on tables, views, procedures, or even at the database level
            </p>
     
        </div>
       
        <section class="assistant container">
            <button class="talk" onclick="Grantcmd()"><i class="fa-solid fa-robot"></i> HubTalk</button>
            <!-- <button onclick="togglePause()">Pause</button> -->
            <div class="content">
                <div id="wordsGrant"></div>
            </div>
        </section>

    </section>


    <section>
        <div class="ddlcmd container">
            <h4>REVOKE</h4>
            <p>
                Removes specific privileges from database users or roles.
            </p>
            <h6>Commands</h6>
            <div class="copy-text">
                <input type="text" class="text" value="REVOKE privileges ON object FROM {user | role | PUBLIC};" id="textToCopy" readonly>
                <!-- <button class="copy">
                    <i class="fa fa-clone "> Copy </i>
                </button> -->

            </div>

            <h6>Example</h6>
      <input type="text" value="REVOKE SELECT, UPDATE ON MY_TABLE FROM USER1, USER2;" id="textToCopy" readonly>
            <h6>
                Explanation:
            </h6>
            <p>
                The UPDATE command is used to modify existing records (rows) in a table. You specify which table to
                update and set new values for one or more columns. The WHERE clause is used to specify the rows to be
                updated based on certain conditions. If you omit the WHERE clause, all rows in the table will be
                updated.
            </p>

            <div class="copy-text">
                <input type="text" value=" REVOKE DELETE ON Employees FROM user2;" id="textToCopy" readonly>
                <button class="copy" onclick="copyText(this)">
                    <i class="fa fa-clone" aria-hidden="true"></i>
                </button> 
            </div>

            <p class="mt-3">
                In this example,REVOKE command removes the permission to delete data from the "Employees" table from the user named "user2". Like GRANT, you can specify permissions to revoke at different levels of granularity.

            </p>
       

        </div>

        <section class="assistant container">
            <button class="talk" onclick=" Revokcmd()"><i class="fa-solid fa-robot"></i> HubTalk</button>
            <!-- <button onclick="togglePause()">Pause</button> -->
            <div class="content">
                <div id="wordsRevok"></div>
            </div>
        </section>

    </section>


    <section>
        <div class="container mt-5">
            <h2>Time For QuizeðŸ˜‰</h2>      
            <h4>Questions</h4>
            <div class="quiz bg-transparent" id="quiz">
                <div class="quiz-header">
                  <h2 id="question">Question Text</h2>
                  <ul class="qustlist">
                   <li>
                     <input type="radio" name="answer" id="a" class="answer">
                     <label for="a" id="a_text">Answer</label>
                   </li>
                   <li>
                     <input type="radio" name="answer" id="b" class="answer">
                     <label for="b" id="b_text">Answer</label>
                   </li>
                   <li>
                     <input type="radio" name="answer" id="c" class="answer">
                     <label for="c" id="c_text">Answer</label>
                   </li>
                   <li>
                     <input type="radio" name="answer" id="d" class="answer">
                     <label for="d" id="d_text">Answer</label>
                   </li>
                 </ul>
               </div>
               <button id="submit" style="outline: 0; background-color: blue;color: aliceblue;border-radius: 10px;padding: 5px; margin-left: -0.5rem;">Submit</button>
             </div>
        </div>
     </section>

    <div class="butt" style="margin:0 1em; margin-top: 1em;">
        <button class="but"><a href="DML.html">Prev</a></button>
        <button class="but"><a href="TCL.html">Next</a></button>
    </div>

    
   <!-- AI -->
   <section>
    <div class="chatbot-icon">
        <button class="btn btn-primary loading-aiimg" id="toggleChatbot">Ai-Hubs
            <img src="img/ai-assistant.png" alt="AI Assistant" style="width: 30px; height: 30px; margin-left: 5px;" class="loading-aiimg">
        </button>
    </div>
    
    <div class="chatbot-window" id="chatbotWindow">
        <div class="chatbot-header d-flex justify-content-between align-items-center">
            <h5>Ai-Hubs  <img src="img/ai-assistant.png" alt="AI Assistant" style="width: 30px; height: 30px; margin-left: 2px;"></h5>
            <i class="fa-solid fa-x" id="closeChatbot"></i>
        </div>
        <div class="chatbot-body">
            <textarea class="form-control mb-3" id="questionInput" cols="30" rows="5" placeholder="Ask an SQL querying question..."></textarea>
            <div class="grid">
                <button class="btn btn-primary" id="generateAnswerBtn">Generate Answer</button>
                <button class="btn btn-secondary" id="resetBtn">Reset</button>
            </div>
            <div class="mt-4">
                <h5>Answer:</h5>
                <pre class="answer-box" id="answerOutput"></pre>
            </div>
        </div>
    </div>
   </section>
<!--  -->

<!-- Footer -->

<footer>
    <div class="text-center mt-5 bg-dark p-2">
      <p class="fs-5">&COPY; Copyright Own by StudyHub</p>
    </div>
  </footer>

<!-- Footer  -->

    <script src="https://kit.fontawesome.com/def8c494cf.js" crossorigin="anonymous"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/DCL.js"></script>
    <script src="js/script.js"></script>
    <script src="js/voice.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="js/aihub.js"></script>  

    <script>
        let UserCreds = JSON.parse(sessionStorage.getItem("user-creds"));
        let UserInfo = JSON.parse(sessionStorage.getItem("user-info"));
        let SignoutBtn;
        let SignInLink = document.getElementById("signInLink");
        let ProfileLink = document.getElementById("profileLink");
        let logoutTimer;
        let signUpRedirectTimer; // Timer for sign-up redirection
        
        const Signout = () => {
            sessionStorage.removeItem("user-creds");
            sessionStorage.removeItem("user-info");
            updateDropdown(); 
            window.location.href = "index.html"; 
        };
        
      
        // const redirectToSignUp = () => {
          
        //     if (!sessionStorage.getItem("user-creds")) {
        //         signUpRedirectTimer = setTimeout(() => {
        //             window.location.href = "Login.html"; 
        //         }, 10000); 
        //     }
        // };
        
        
        // const clearSignUpRedirectTimer = () => {
        //     clearTimeout(signUpRedirectTimer);
        // };
        
        // const initializeLogoutTimer = () => {
        //     clearTimeout(logoutTimer); 
        //     if (sessionStorage.getItem("user-creds")) {
        //         logoutTimer = setTimeout(() => {
        //             Signout(); 
        //         }, 5 * 60 * 1000); 
        //     }
        // };
        
        const updateDropdown = () => {
            if (!sessionStorage.getItem("user-creds")) {
                SignInLink.style.display = 'block'; 
                ProfileLink.style.display = 'none'; 
                if (SignoutBtn) SignoutBtn.style.display = 'none'; 
                redirectToSignUp(); 
            } else {
                const userInfo = JSON.parse(sessionStorage.getItem("user-info"));
                document.getElementById("userOptionsButton").textContent = userInfo.firstname;
                SignInLink.style.display = 'none'; 
                ProfileLink.style.display = 'block'; 
                if (SignoutBtn) SignoutBtn.style.display = 'block'; 
                clearSignUpRedirectTimer(); 
                // initializeLogoutTimer(); 
            }
        };
        
        document.addEventListener('DOMContentLoaded', () => {
            SignoutBtn = document.getElementById("signoutbutton"); 
            updateDropdown();
    
            // Check if the user is logged in before adding event listeners for user activity
            if (sessionStorage.getItem("user-creds")) {
                // Reset inactivity timer on user activity
                document.addEventListener("click", initializeLogoutTimer);
                document.addEventListener("keydown", initializeLogoutTimer);
                document.addEventListener("mousemove", initializeLogoutTimer);
            }
    
            // Add signout button listener after DOM content is loaded
            if (SignoutBtn) {
                SignoutBtn.addEventListener("click", Signout);
            }
        });
    
        const saveLastPage = () => {
            sessionStorage.setItem("last-page", window.location.href);
        };
        window.addEventListener('beforeunload', saveLastPage);
    
        const onLoginSuccess = () => {
            // sessionStorage.setItem("user-creds", JSON.stringify({username: 'user'})); 
            // sessionStorage.setItem("user-info", JSON.stringify({firstname: 'John'})); 
            updateDropdown(); 
            redirectToLastPage(); 
        };
    </script>

</body>
</html>
